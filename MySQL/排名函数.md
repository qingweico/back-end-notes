[TOC]

测试表结构和数据

```mysql
CREATE TABLE scores (
    id INT PRIMARY KEY,          
    score DECIMAL(5, 2) NOT NULL 
);

INSERT INTO scores (id, score) VALUES
(1, 3.50),
(2, 3.65),
(3, 4.00),
(4, 3.85),
(5, 4.00),
(6, 3.65);
```

这四个函数都属于 窗口排序分析函数,其不减少行数

示例用法

```mysql
-- row_number() 可以换成 rank() 或 dense_rank() 或 ntile(5) 等等
SELECT
	*,
	row_number() OVER ( ORDER BY score ) AS rank_ 
FROM
	scores
```

## row_number()

为窗口内的每一行分配一个唯一、连续的序号

- 不考虑并列
- 行号一定唯一

即使两条 score 相同的记录, 排名也会不一样(连续递增)

## rank()

两条 score 相同的记录,排名会一样(会跳号,排名的数字不是连续的)

## dense_rank()

两条 score 相同的记录,排名会一样(不会跳号,排名的数字是连续的)

## ntile()

把排序后的窗口平均分成 n 份,返回当前行所在的桶编号

